CREATE TABLE estateagent (login VARCHAR(15) NOT NULL PRIMARY KEY, name VARCHAR(50), address VARCHAR(50), password VARCHAR(15));

CREATE TABLE estate (id INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1, NO CACHE) PRIMARY KEY, login VARCHAR(15) NOT NULL, city VARCHAR(50), postalcode VARCHAR(15), street VARCHAR(50), streetnumber VARCHAR(15), squarearea REAL, FOREIGN KEY (login) REFERENCES estateagent (login) ON DELETE CASCADE);

CREATE TABLE apartment (id INT NOT NULL PRIMARY KEY, floor INT, rent REAL, rooms INT, balcony SMALLINT, builtinkitchen SMALLINT, FOREIGN KEY (id) REFERENCES estate (id) ON DELETE CASCADE);

CREATE TABLE house (id INT NOT NULL PRIMARY KEY, floors INT, price REAL, garden SMALLINT, FOREIGN KEY (id) REFERENCES estate (id) ON DELETE CASCADE);

CREATE TABLE contract (contractno INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1, NO CACHE) PRIMARY KEY, date DATE, place VARCHAR(50));

CREATE TABLE person (id INT NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1, NO CACHE) PRIMARY KEY, firstname VARCHAR(50), name VARCHAR(50), address VARCHAR(50));

CREATE TABLE purchasecontract (contractno INT NOT NULL PRIMARY KEY, noofinstallments INT, interestrate REAL, houseid INT NOT NULL UNIQUE, personid INT NOT NULL, FOREIGN KEY (contractno) REFERENCES contract (contractno) ON DELETE CASCADE, FOREIGN KEY (houseid) REFERENCES house (id) ON DELETE CASCADE, FOREIGN KEY (personid) REFERENCES person (id) ON DELETE CASCADE);

CREATE TABLE tenancycontract (contractno INT NOT NULL PRIMARY KEY, startdate DATE, duration INT, additionalcosts REAL, apartmentid INT NOT NULL UNIQUE, personid INT NOT NULL, FOREIGN KEY (contractno) REFERENCES contract (contractno) ON DELETE CASCADE, FOREIGN KEY (apartmentid) REFERENCES apartment (id) ON DELETE CASCADE, FOREIGN KEY (personid) REFERENCES person (id) ON DELETE CASCADE);